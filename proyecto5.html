import React, { useState } from 'react';
const Header = ({ title, onNavigate }) => {
  const headerStyles = {
    position: 'fixed',
    top: 0,
    left: 0,
    right: 0,
    backgroundColor: 'white',
    boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',
    borderBottom: '4px solid transparent',
    borderImage: 'linear-gradient(to right, #8b5cf6, #3b82f6) 1',
    zIndex: 50,
    padding: '1rem 0'
  };

  const navStyles = {
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    maxWidth: '1200px',
    margin: '0 auto',
    padding: '0 2rem'
  };

  return (
    <header style={headerStyles}>
      <nav style={navStyles}>
        <div className="flex items-center space-x-2">
          <i className="fas fa-code text-purple-600 text-2xl"></i>
          <span className="text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
            {title}
          </span>
        </div>
        
        <ul className="flex items-center space-x-6 list-none m-0">
          {['Inicio', 'Sobre mí', 'Proyectos', 'Contáctame'].map((item, index) => (
            <li key={index}>
              <button 
                onClick={() => onNavigate(item)}
                className="text-gray-700 hover:text-purple-600 font-medium px-3 py-2 rounded-lg transition-all duration-300 hover:bg-purple-50 border-none bg-transparent cursor-pointer"
              >
                <i className={`fas fa-${['home', 'user', 'project-diagram', 'envelope'][index]} mr-1`}></i>
                {item}
              </button>
            </li>
          ))}
        </ul>
      </nav>
    </header>
  );
};
const Card = ({ title, icon, gradient, children, className = "" }) => {
  const cardStyles = {
    border: 'none',
    borderRadius: '10px',
    boxShadow: '0 10px 30px -5px rgba(0, 0, 0, 0.3)',
    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
    backgroundColor: 'white',
    overflow: 'hidden'
  };

  const headerStyles = {
    background: gradient || 'linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%)',
    color: 'white',
    padding: '1rem',
    border: 'none'
  };

  return (
    <div 
      className={`hover:-translate-y-2 hover:shadow-2xl ${className}`}
      style={cardStyles}
    >
      <div style={headerStyles}>
        <div className="flex items-center">
          <i className={`${icon} text-xl mr-3`}></i>
          <h2 className="text-xl font-bold m-0">{title}</h2>
        </div>
      </div>
      <div className="p-4">
        {children}
      </div>
    </div>
  );
};

const Badge = ({ children, color = "purple" }) => {
  const colorMap = {
    purple: "bg-purple-100 text-purple-800",
    blue: "bg-blue-100 text-blue-800",
    green: "bg-green-100 text-green-800",
    red: "bg-red-100 text-red-800",
    yellow: "bg-yellow-100 text-yellow-800"
  };

  return (
    <span className={`${colorMap[color]} px-3 py-1 rounded-full text-sm font-medium inline-block`}>
      {children}
    </span>
  );
};

const CodeBlock = ({ children, language = "html" }) => {
  const codeBlockStyles = {
    backgroundColor: '#1f2937',
    color: '#10b981',
    padding: '1rem',
    borderRadius: '0.5rem',
    fontFamily: 'JetBrains Mono, monospace',
    fontSize: '0.875rem',
    overflow: 'auto',
    margin: '1rem 0'
  };

  return (
    <div style={codeBlockStyles}>
      <pre className="m-0 whitespace-pre-wrap">
        {children}
      </pre>
    </div>
  );
};

// Componente Exercise que recibe props y muestra children
const Exercise = ({ number, title, color, code, children }) => {
  const [showCode, setShowCode] = useState(false);

  return (
    <div className="mb-8">
      <h4 className={`font-bold mb-3 text-${color}-600 text-lg`}>
        <i className={`fas fa-${number} mr-2`}></i>
        {title}
      </h4>
      
      <button 
        onClick={() => setShowCode(!showCode)}
        className={`mb-3 px-4 py-2 bg-${color}-600 text-white rounded hover:bg-${color}-700 transition-colors border-none cursor-pointer`}
      >
        {showCode ? 'Ocultar' : 'Mostrar'} Código
      </button>
      
      {showCode && (
        <div>
          <h5 className="font-semibold mb-2">Código del ejercicio:</h5>
          <CodeBlock>{code}</CodeBlock>
        </div>
      )}
      
      <h5 className="font-semibold mb-2">Resultado:</h5>
      <div className="p-4 bg-gray-50 rounded">
        {children}
      </div>
    </div>
  );
};

// Componente hijo que recibe datos via props
const UserProfile = ({ user, skills, onSkillClick }) => {
  const profileStyles = {
    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
    padding: '2rem',
    borderRadius: '1rem',
    color: 'white',
    textAlign: 'center'
  };

  return (
    <div style={profileStyles}>
      <div className="mb-4">
        <img 
          src={`https://ui-avatars.com/api/?name=${user.name}&size=80&background=ffffff&color=667eea&bold=true`}
          alt="Avatar" 
          className="rounded-full mx-auto mb-3"
        />
        <h3 className="text-xl font-bold">{user.name}</h3>
        <p className="opacity-90">{user.role}</p>
        <p className="opacity-75 text-sm">{user.email}</p>
      </div>
      
      <div className="mb-4">
        <h4 className="font-semibold mb-2">Habilidades:</h4>
        <div className="flex flex-wrap gap-2 justify-center">
          {skills.map((skill, index) => (
            <button
              key={index}
              onClick={() => onSkillClick(skill)}
              className="bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm hover:bg-opacity-30 transition-all border-none cursor-pointer text-white"
            >
              {skill}
            </button>
          ))}
        </div>
      </div>
    </div>
  );
};

// Componente principal
const Semana3React = () => {
  const [selectedSkill, setSelectedSkill] = useState('');
  const [currentSection, setCurrentSection] = useState('Inicio');

  // Datos del usuario para pasar como props
  const userData = {
    name: "Giampier Aliaga",
    role: "Desarrollador Frontend",
    email: "giampier@ejemplo.com"
  };

  const userSkills = ["React", "JavaScript", "HTML", "CSS", "Bootstrap", "Tailwind"];

  const handleSkillClick = (skill) => {
    setSelectedSkill(skill);
    alert(`Has seleccionado: ${skill}`);
  };

  const handleNavigation = (section) => {
    setCurrentSection(section);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700">
      <Header title="Portafolio React" onNavigate={handleNavigation} />
      
      <main className="pt-24 pb-12">
        <div className="max-w-6xl mx-auto px-4">
          
          {/* Back Button */}
          <div className="mb-8">
            <button className="bg-transparent border border-white text-white px-4 py-2 rounded hover:bg-white hover:text-purple-600 transition-all">
              <i className="fas fa-arrow-left mr-2"></i>
              Volver a proyectos
            </button>
          </div>
          
          {/* Hero Section */}
          <div className="text-center mb-8">
            <div className="mb-4">
              <img 
                src="https://ui-avatars.com/api/?name=Giampier+Aliaga&size=120&background=667eea&color=ffffff&bold=true" 
                alt="Avatar" 
                className="rounded-full border-4 border-white shadow-lg mx-auto"
              />
            </div>
            <h1 className="text-5xl font-bold text-white mb-3">Semana 3 - React</h1>
            <p className="text-xl text-white opacity-90 max-w-2xl mx-auto">
              Framework JavaScript con React - Componentes, Props y Estilos
            </p>
          </div>
          
          {/* Learned Topics Card */}
          <Card 
            title="Temas Aprendidos" 
            icon="fas fa-graduation-cap"
            className="mb-8"
          >
            <div className="mb-4">
              <div className="flex flex-wrap gap-2">
                <Badge color="blue">React JS</Badge>
                <Badge color="green">JSX</Badge>
                <Badge color="purple">Components</Badge>
                <Badge color="red">Props</Badge>
                <Badge color="yellow">Styles</Badge>
              </div>
            </div>
            
            <div>
              <p className="text-gray-600 mb-3 text-lg leading-relaxed">
                Framework JavaScript para desarrollo frontend con arquitectura basada en componentes.
              </p>
              <ul className="text-gray-600 space-y-1">
                <li>• Estructura y operación de Framework</li>
                <li>• Client Side Rendering</li>
                <li>• Desarrollo basado en componentes</li>
                <li>• JSX, Props y Children</li>
                <li>• Gestión de estilos (inline, CSS, modules)</li>
              </ul>
            </div>
          </Card>
          
          {/* Exercises Section */}
          <Card 
            title="Ejercicios y Resultados" 
            icon="fas fa-code"
            gradient="linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)"
            className="mb-8"
          >
            <Exercise
              number="1"
              title="Componente Card Interactivo con Props"
              color="purple"
              code={`const InteractiveCard = ({ title, description, buttonText }) => {
  const [clicked, setClicked] = useState(false);
  
  return (
    <div className="max-w-sm mx-auto bg-white rounded-xl shadow-md hover:shadow-xl transition-shadow">
      <div className="p-6">
        <h3 className="text-xl font-semibold text-gray-900 mb-2">{title}</h3>
        <p className="text-gray-600 mb-4">{description}</p>
        <button 
          onClick={() => setClicked(!clicked)}
          className="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700"
        >
          {clicked ? 'Clickeado!' : buttonText}
        </button>
      </div>
    </div>
  );
};`}
            >
              <InteractiveCard 
                title="Tarjeta con React" 
                description="Esta tarjeta usa props y estado de React"
                buttonText="Hacer click"
              />
            </Exercise>

            <hr className="my-6" />

            <Exercise
              number="2"
              title="Layout Responsivo con Componentes"
              color="blue"
              code={`const ResponsiveLayout = ({ columns }) => (
  <div className="flex flex-wrap gap-4 p-4 bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg">
    {columns.map((column, index) => (
      <LayoutColumn key={index} {...column} />
    ))}
  </div>
);

const LayoutColumn = ({ title, content, color }) => (
  <div className="flex-1 min-w-48 bg-white p-4 rounded-lg shadow">
    <h3 className={\`font-bold text-\${color}-600\`}>{title}</h3>
    <p className="text-gray-600">{content}</p>
  </div>
);`}
            >
              <ResponsiveLayout 
                columns={[
                  { title: "Componente 1", content: "Usando props dinámicamente", color: "blue" },
                  { title: "Componente 2", content: "Reutilizable y escalable", color: "purple" },
                  { title: "Componente 3", content: "Layout con React", color: "green" }
                ]}
              />
            </Exercise>

            <hr className="my-6" />

            <Exercise
              number="3"
              title="Pasar Datos con Props y Children"
              color="green"
              code={`const UserProfile = ({ user, skills, onSkillClick }) => (
  <div style={profileStyles}>
    <img src={user.avatar} alt="Avatar" />
    <h3>{user.name}</h3>
    <p>{user.role}</p>
    <div>
      {skills.map(skill => (
        <button key={skill} onClick={() => onSkillClick(skill)}>
          {skill}
        </button>
      ))}
    </div>
  </div>
);
<UserProfile 
  user={userData} 
  skills={userSkills} 
  onSkillClick={handleSkillClick} 
/>`}
            >
              <div>
                <UserProfile 
                  user={userData}
                  skills={userSkills}
                  onSkillClick={handleSkillClick}
                />
                {selectedSkill && (
                  <div className="mt-4 p-3 bg-green-100 text-green-800 rounded">
                    <strong>Última habilidad seleccionada:</strong> {selectedSkill}
                  </div>
                )}
              </div>
            </Exercise>
          </Card>
          
          {/* Final Reflection */}
          <Card 
            title="Reflexión Final" 
            icon="fas fa-lightbulb"
            gradient="linear-gradient(135deg, #ec4899 0%, #f43f5e 100%)"
          >
            <div className="space-y-4">
              <div>
                <h5 className="font-bold mb-2 text-gray-800">¿Qué aprendí?</h5>
                <p className="text-gray-600 mb-4">
                  React ha transformado mi enfoque del desarrollo frontend. He aprendido a crear componentes 
                  reutilizables, manejar el estado con hooks, y pasar datos entre componentes usando props y 
                  children. La arquitectura basada en componentes permite un código más modular y mantenible.
                </p>
              </div>
              
              <div>
                <h5 className="font-bold mb-2 text-gray-800">¿Cómo aprendí?</h5>
                <p className="text-gray-600 mb-4">
                  A través de la práctica hands-on, creando componentes desde cero, experimentando con 
                  diferentes tipos de estilos (inline, CSS classes, styled components), y implementando 
                  la comunicación entre componentes padre e hijo mediante props y callbacks.
                </p>
              </div>

              <div>
                <h5 className="font-bold mb-2 text-gray-800">Conceptos Clave Implementados:</h5>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="bg-blue-50 p-3 rounded">
                    <strong className="text-blue-800">JSX & Componentes:</strong>
                    <p className="text-sm text-blue-600 mt-1">Sintaxis declarativa para crear interfaces</p>
                  </div>
                  <div className="bg-purple-50 p-3 rounded">
                    <strong className="text-purple-800">Props & Children:</strong>
                    <p className="text-sm text-purple-600 mt-1">Comunicación entre componentes</p>
                  </div>
                  <div className="bg-green-50 p-3 rounded">
                    <strong className="text-green-800">Estado & Hooks:</strong>
                    <p className="text-sm text-green-600 mt-1">Manejo dinámico de datos</p>
                  </div>
                  <div className="bg-red-50 p-3 rounded">
                    <strong className="text-red-800">Estilos Dinámicos:</strong>
                    <p className="text-sm text-red-600 mt-1">CSS-in-JS y clases condicionales</p>
                  </div>
                </div>
              </div>
            </div>
          </Card>
        </div>
      </main>
    </div>
  );
};

const InteractiveCard = ({ title, description, buttonText }) => {
  const [clicked, setClicked] = useState(false);
  
  return (
    <div className="max-w-sm mx-auto bg-white rounded-xl shadow-md hover:shadow-xl transition-shadow duration-300">
      <div className="p-6">
        <h3 className="text-xl font-semibold text-gray-900 mb-2">{title}</h3>
        <p className="text-gray-600 mb-4">{description}</p>
        <button 
          onClick={() => setClicked(!clicked)}
          className={`px-4 py-2 ${clicked ? 'bg-green-600' : 'bg-purple-600'} text-white rounded hover:opacity-80 transition-colors border-none cursor-pointer`}
        >
          {clicked ? '¡Clickeado!' : buttonText}
        </button>
      </div>
    </div>
  );
};

const ResponsiveLayout = ({ columns }) => (
  <div className="flex flex-wrap gap-4 p-4 bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg">
    {columns.map((column, index) => (
      <LayoutColumn key={index} {...column} />
    ))}
  </div>
);

const LayoutColumn = ({ title, content, color }) => (
  <div className="flex-1 min-w-48 bg-white p-4 rounded-lg shadow">
    <h3 className={`font-bold text-${color}-600`}>{title}</h3>
    <p className="text-gray-600">{content}</p>
  </div>
);

export default Semana3React;
